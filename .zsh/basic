#
# basic config with nifty functions
#

# If running interactively, then:
if [ "$PS1" ]; then
  # clean all aliases
  unhash -am '*'
  
  # nice prompt
  export PS1='[%n@%m:%~]$ '
  # nice ri
  export RI="-f ansi"
  #export RI="--no-pager -f ansi"
  
  # alias section
  alias la='ls -a'
  alias ll='ls -lh'
  alias l='ls -lah'
  alias e='emacsclient -t'
  # with mmv u can rename multiple files. mmv *.text *.txt
  alias mmv='noglob zmv -W'
  autoload -U zmv
  
  # set different colors on STDERR
  autoload -U colors
  colors
  #exec 2>>(while read line; do
  #  print "$fg[blue]${(q)line}" > /dev/tty; done & )
  #print "$bg[black]$fg[red]${(q)line}" > /dev/tty; done &)
  
  # history related stuff.
  export HISTSIZE=5000
  export SAVEHIST=5000
  export HISTFILE=~/.zsh_history
  setopt hist_ignore_dups        # ignore same commands run twice+
  setopt appendhistory           # don't overwrite history 
  setopt histignorespace         # remove command lines from the history list when
  setopt histverify              # when using ! cmds, confirm first
  
  # use ssh for rysnc
  export RSYNC_RSH=ssh
  
  export VISUAL=vim
  export EDITOR=$VISUAL
  export PAGER=less

  # support colors in less
  export LESS_TERMCAP_mb=$'\E[01;31m'
  export LESS_TERMCAP_md=$'\E[01;31m'
  export LESS_TERMCAP_me=$'\E[0m'
  export LESS_TERMCAP_se=$'\E[0m'
  export LESS_TERMCAP_so=$'\E[01;44;33m'
  export LESS_TERMCAP_ue=$'\E[0m'
  export LESS_TERMCAP_us=$'\E[01;32m'
  
  # nifty aliases
  alias -g L='2>&1 | less'
  alias -g G='| grep'
  alias -g S='|sort'
  alias -g W='|wc -l'
  # file extension aliases (open with)
  alias -s zip="zipinfo"
  alias -s txt="less"
  #alias -s rb="mate"
  alias -s pp="mate"
  alias -s tex="mate"
  alias -s c="mate"
  # quick edit
  alias z="$EDITOR ~/.zsh"
  
  # history cmd expansion using space, example: !-3‚ê£
  bindkey ' ' magic-space
  
  # Quote pasted URLs
  autoload url-quote-magic
  zle -N self-insert url-quote-magic
fi

